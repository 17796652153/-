<view class="carRoot"><block wx:if="{{!empty}}"><view class="carTop baseflex"><view class="buyNum">购买数量<text>{{count}}</text></view><view data-event-opts="{{[['tap',[['editCart',['$event']]]]]}}" class="topEdit" bindtap="__e">{{''+(edit?'取消':'管理')+''}}</view></view></block><block wx:if="{{!empty}}"><view class="carMain"><block wx:for="{{cartList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="carShop"><view data-event-opts="{{[['tap',[['check',['shop',index]]]]]}}" class="shopName yuanChecked" bindtap="__e"><block wx:if="{{item.checked}}"><image src="../../static/icon_checked.png" mode></image></block><block wx:else><image src="../../static/icon_unchecked.png" mode></image></block><text>{{item.store_name}}</text></view><block wx:for="{{item.goods}}" wx:for-item="value" wx:for-index="idx" wx:key="idx"><view class="shopGoods"><view data-event-opts="{{[['tap',[['check',['item',index,idx]]]]]}}" class="yuanChecked" bindtap="__e"><block wx:if="{{value.is_select==1}}"><image src="../../static/icon_checked.png" mode></image></block><block wx:else><image src="../../static/icon_unchecked.png" mode></image></block></view><view class="goodsImg"><image class="pic" src="{{www+value.goods_icon}}" mode></image></view><view class="goodsInfo"><view class="goodsName multiHide">{{''+value.goods_name+''}}</view><view data-event-opts="{{[['tap',[['showSpec',[index,idx]]]]]}}" class="goodsSpec singleHide" bindtap="__e"><text>{{value.goods_spec_title}}</text><image src="../../static/icon_arrow-downGray.png" mode></image></view><view class="goodsOperation baseflex"><view class="goodsPrice">￥<text>{{value.goods_price}}</text></view><view class="goodsNumOperation baseflex"><text data-event-opts="{{[['tap',[['subNum',[index,idx]]]]]}}" class="operationBtn sub" bindtap="__e">-</text><input class="goodsNum" type="number" data-event-opts="{{[['blur',[['changeNum',[index,idx,'$event']]]]]}}" value="{{value.num}}" bindblur="__e"/><text data-event-opts="{{[['tap',[['addNum',[index,idx]]]]]}}" class="operationBtn add" bindtap="__e">+</text></view></view></view></view></block></view></block></view></block><block wx:if="{{!empty}}"><view class="carBottom baseflex"><view data-event-opts="{{[['tap',[['check',['all']]]]]}}" class="btnLeft" bindtap="__e"><block wx:if="{{allChecked}}"><image src="../../static/icon_checked.png" mode></image></block><block wx:else><image src="../../static/icon_unchecked.png" mode></image></block><text>全选</text></view><block wx:if="{{!edit}}"><view class="btnRight"><view class="carPrice">合计：<text>￥</text><text class="carMoney">{{total}}</text></view><view data-event-opts="{{[['tap',[['settlement',['$event']]]]]}}" class="btnPay" bindtap="__e">结算</view></view></block><block wx:else><view class="btnRight"><view class="goFollow">加入收藏</view><view data-event-opts="{{[['tap',[['delGoods',['$event']]]]]}}" class="btnPay" bindtap="__e">删除</view></view></block></view></block><block wx:else><view class="carNull"><image src="../../static/car_null.png" mode></image><view>购物车为空</view></view></block><lu-popup-wrapper class="vue-ref" vue-id="2964de54-1" type="{{type}}" transition="{{transition}}" backgroundColor="{{backgroundColor}}" active="{{active}}" height="{{height}}" width="{{width}}" popupId="{{popupId}}" maskShow="{{maskShow}}" maskClick="{{maskClick}}" closeCallback="{{closeCallback}}" data-ref="luPopupWrapper" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view class="specsExplain" scroll-y="true" id="specs"><view class="specGoodsInfo"><block wx:if="{{cartList[activeShopSpec]}}"><view class="specGoodsImg"><image class="pic" src="{{www+cartList[activeShopSpec].goods[activegoodsSpec].goods_icon}}" mode="aspectFill"></image></view></block><view class="specGoodsContent"><view class="specGoodsName singleHide">{{''+cartList[activeShopSpec].goods[activegoodsSpec].goods_name+''}}</view><block wx:if="{{!activeSpec&&activeSpec!=0}}"><view class="specGoodsPrice">￥<text>{{goodsSpec[0].goods_price}}</text>起</view></block><block wx:else><view class="specGoodsPrice">￥<text>{{goodsSpec[activeSpec].goods_price}}</text></view></block><view class="specGoodsSpecs multiHide">{{''+(activeSpec==0||activeSpec?goodsSpec[activeSpec].goods_spec_title:'请选择口味')+''}}</view></view></view><view class="goodsSpecAll"><view class="specTitle">口味</view><view class="selGoodsSpec"><block wx:for="{{goodsSpec}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['changeSpec',[index]]]]]}}" class="{{[(activeSpec==0||activeSpec)&&activeSpec===index?'goodsSpecItem activeSpecs':'goodsSpecItem']}}" bindtap="__e">{{item.goods_spec_title}}</view></block></view></view><view data-event-opts="{{[['tap',[['buyClick',['$event']]]]]}}" class="buyOperation" style="margin-top:20rpx;" bindtap="__e">确定</view><view data-event-opts="{{[['tap',[['close',['$event']]]]]}}" class="close" bindtap="__e"><image class="pic" src="../../static/icon_clone-line.png" mode></image></view></scroll-view></lu-popup-wrapper></view>